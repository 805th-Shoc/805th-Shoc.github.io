<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Intro to CI/CD # The goal of CI/CD practice is to provide a workflow that can support frequent updates, good testing, consistent builds, and prompt deploys. Additionally issues with code should be found quickly and addressed before it is released to customers.
Delivery Pipeline Basics # There are usually four conceptual steps in a delivery pipeline:
Build: Where you build the code into a binary or other artifacts to eventually distribute."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="Intro to CI/CD # The goal of CI/CD practice is to provide a workflow that can support frequent updates, good testing, consistent builds, and prompt deploys. Additionally issues with code should be found quickly and addressed before it is released to customers.
Delivery Pipeline Basics # There are usually four conceptual steps in a delivery pipeline:
Build: Where you build the code into a binary or other artifacts to eventually distribute."><meta property="og:type" content="article"><meta property="og:url" content="https://805th-Shoc.github.io/docs/develop/intro-to-ci-cd/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2023-02-08T15:06:45-08:00"><title>Intro to Ci Cd | Engineering-Playbook</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.4b35fed0bea034bbc19c89c71e14b73fb9c68cfcc586b9382adfb9b7b103ba06.css integrity="sha256-SzX+0L6gNLvBnInHHhS3P7nGjPzFhrk4Kt+5t7EDugY=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.941313a023209828c887550ad1e6ffb06e03377997c980d428153b11b72ea760.js integrity="sha256-lBMToCMgmCjIh1UK0eb/sG4DN3mXyYDUKBU7Ebcup2A=" crossorigin=anonymous></script>
<script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js integrity="sha256-b2+Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC+NdcPIvZhzk=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>Engineering-Playbook</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/>Welcome</a></li><li><a href=/docs/documentation/introduction-to-documentation/>Documentation</a><ul><li><a href=/docs/documentation/introduction-to-documentation/>Introduction to Documentation</a></li><li><a href=/docs/documentation/adr/>Architectural Decision Records</a></li><li><a href=/docs/documentation/external-resources/>External Resources</a></li></ul></li><li><a href=/docs/compliance/information-security-and-federal-compliance/>Security and Compliance</a><ul><li><a href=/docs/compliance/authorization-to-operate/>Authorization to Operate</a></li><li><a href=/docs/compliance/risk-management-framework/>Risk Management Framework</a></li></ul></li><li><a href=/docs/project_management/phases-of-an-agile-project/>Project Management</a><ul><li><a href=/docs/project_management/phases-of-an-agile-project/>Phases of an Agile Project</a><ul><li><a href=/docs/project_management/agile-project-discovery-phase/>Discovery Phase</a></li><li><a href=/docs/project_management/agile-project-prototyping-phase/>Prototyping Phase</a></li><li><a href=/docs/project_management/agile-project-beta-phase/>Beta Phase</a></li><li><a href=/docs/project_management/agile-project-go-live/>Go Live</a></li><li><a href=/docs/project_management/agile-project-hand-off/>Hand Off</a></li></ul></li><li><a href=/docs/project_management/the-steel-cable/>The Steel Cable</a></li><li><a href=/docs/project_management/definition-of-done/>Definition of Done</a></li><li><a href=/docs/project_management/accessibility-standards/>Accessibility Standards</a></li></ul></li><li><a href=/docs/develop/tools-and-practice/>Devloping</a><ul><li><a href=/docs/develop/tools-and-practice/>Tools and Practice</a></li><li><a href=/docs/develop/bugs/>Defects/Bugs</a></li><li><a href=/docs/develop/intro-to-ci-cd/ class=active>CI/CD</a><ul><li><a href=/docs/develop/intro-to-ci-cd/ class=active>Intro to CI/CD</a></li><li><a href=/docs/develop/standard-delivery-pipeline/>Standard Delivery Pipeline</a></li></ul></li><li><a href=/docs/develop/code-reviews/>Code Reviews</a><ul><li><a href=/docs/develop/great-code-brings-happiness/>Great Code Brings Happiness</a></li><li><a href=/docs/develop/best-practices-for-submitting-pull-requests/>Best Practices for Submitting a Pull Request</a></li></ul></li><li><a href=/>Command Line Tools</a><ul><li><a href=/docs/develop/direnv/>direnv</a></li><li><a href=/docs/develop/docker/>Docker</a></li></ul></li><li><a href=/docs/develop/configuration/>Configuration</a></li><li><a href=/docs/develop/development-cycle/>Development Cycle</a></li><li><a href=/docs/develop/editors-ides-debuggers/>Editors, IDEs and Debuggers</a></li><li><a href=/docs/develop/growth/>Growth</a></li><li><a href=/docs/develop/health-checks/>Health Checks</a></li><li><a href=/docs/develop/programming-languages/>Programming Languages</a><ul><li><a href=/docs/develop/programming-languages-shell/>Shell Programming</a></li><li><a href=/docs/develop/programming-languages-golang/>Golang</a></li><li><a href=/docs/develop/programming-languages-python/>Python</a></li></ul></li><li><a href=/>Learning Resources</a></li><li><a href=/>Open Source</a></li><li><a href=/>Pair Programming</a></li><li><a href=/>Technical Design</a></li><li><a href=/docs/develop/source-control/>Source Control</a></li><li><a href=/>Leadership</a></li></ul></li><li><a href=/docs/infrastructure/>Infrastructure</a><ul><li><a href=/>IaC</a></li></ul></li></ul><br><ul><li><a href=/posts/>Blog</a></li><li><a href=https://github.com/805th-Shoc/805th-Shoc.github.io target=_blank rel=noopener>Github</a></li><li><a href=https://themes.gohugo.io/hugo-book/ target=_blank rel=noopener>Hugo Themes</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Intro to Ci Cd</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#intro-to-cicd>Intro to CI/CD</a><ul><li><a href=#delivery-pipeline-basics>Delivery Pipeline Basics</a><ul><li><a href=#build>Build</a></li><li><a href=#test>Test</a></li><li><a href=#deployment>Deployment</a></li><li><a href=#release>Release</a></li></ul></li><li><a href=#continuous-integration--delivery--deployment>Continuous (Integration | Delivery | Deployment)</a><ul><li><a href=#continuous-integration>Continuous Integration</a></li><li><a href=#continuous-delivery>Continuous Delivery</a></li><li><a href=#continuous-deployment>Continuous Deployment</a></li></ul></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=intro-to-cicd>Intro to CI/CD
<a class=anchor href=#intro-to-cicd>#</a></h1><p>The goal of CI/CD practice is to provide a workflow that can support frequent updates, good testing, consistent builds, and prompt deploys. Additionally issues with code should be found quickly and addressed before it is released to customers.</p><h2 id=delivery-pipeline-basics>Delivery Pipeline Basics
<a class=anchor href=#delivery-pipeline-basics>#</a></h2><p>There are usually four conceptual steps in a delivery pipeline:</p><ul><li><code>Build</code>: Where you build the code into a binary or other artifacts to eventually distribute.</li><li><code>Test</code>: Where you validate or test the artifacts built in the previous step.</li><li><code>Deploy</code>: Where you configure and deploy the artifacts to an environment. Could be a pre-prod or prod.</li><li><code>Release</code>: Where you finally allow users access to that version of code you&rsquo;ve configured and built.</li></ul><p>In many cases you can merge or swap the steps <code>Release</code> and <code>Deploy</code>.</p><p>Philosophical ideas and notes about each step are outlined in the following sections. These are not the be-all end-all of what we do, but are a starting point for how we think about this process.</p><p>Note: These steps are all fungible. They can be combined to a degree, you can have multiple deployment and validation steps. You could merge deploy and release. What is important is that each of those steps is well understood and documented. That they are configurable and repeatable.</p><h3 id=build>Build
<a class=anchor href=#build>#</a></h3><h4 id=builds-should-be-repeatable>Builds should be repeatable.
<a class=anchor href=#builds-should-be-repeatable>#</a></h4><p>This means you should be able to check out the code from your project at that same commit hash and build it again and get the same artifact(s). Note: This means that dependencies should be versioned in your codebase. To keep dependencies up to date in an automated way you can use
<a href=/>Dependabot</a> with our
<a href=/>documentation on configuring it</a>. Please do whatever is &ldquo;correct&rdquo; in the context of the languages/frameworks your project is built in.</p><h4 id=builds-should-be-hermetic>Builds should be hermetic.
<a class=anchor href=#builds-should-be-hermetic>#</a></h4><p>This means that the build should be isolated from other builds. In CI, the build shouldn&rsquo;t share the same workspace or files from a previous build or from a build of a different project.</p><h4 id=builds-should-output-an-immutable-artifact>Builds should output an immutable artifact.
<a class=anchor href=#builds-should-output-an-immutable-artifact>#</a></h4><p>Artifact outputs should not be rewritten or altered by subsequent builds. This allows you to distribute or redeploy from these unaltered artifacts for different points in code. Additionally, try to label the artifact with the appropriate versioning scheme for your project.</p><h4 id=notes-about-versioning>Notes about Versioning
<a class=anchor href=#notes-about-versioning>#</a></h4><p>Version your code and artifacts. Doesn&rsquo;t really matter how, just do it. It will make it easier to track down issues or deploy specific versions of your project.</p><p>In your code consider adding a command or an endpoint that surfaces that version for debugging.</p><p>Tag your versioned releases on your mainline branch. This helps you find the state of mainline at the point in time your artifact was built. Additionally, if you are using GitHub you can use their releases functionality to share release artifacts and notes.</p><p>Here is a preferential ordering of versioning schemes:</p><h4 id=semantic-versioning>Semantic Versioning
<a class=anchor href=#semantic-versioning>#</a></h4><p>Why semver? It tells you and your customer how much has changed since the last released code and sets expectations accordingly. If you are tagging at mainline where you are building from, you can rebuild the artifact from the same point.</p><p>From
<a href=https://semvar.org>semver.org</a>:</p><pre tabindex=0><code>Given a version number MAJOR.MINOR.PATCH, increment the:

MAJOR version when you make incompatible API changes,
MINOR version when you add functionality in a backwards compatible manner, and
PATCH version when you make backwards compatible bug fixes.
Additional labels for pre-release and build metadata are available as extensions to the MAJOR.MINOR.PATCH format.
</code></pre><h4 id=commit-hash>Commit Hash
<a class=anchor href=#commit-hash>#</a></h4><p>A commit hash is unique (with extremely few collisions) and is easily linked back to history in code. However, how much has changed is opaque to your users and it is difficult to determine how old this version is in comparison to other versions.</p><h4 id=other-versioning-strategies>Other versioning strategies
<a class=anchor href=#other-versioning-strategies>#</a></h4><p>These are other versioning strategies we&rsquo;ve seen. We do not recommend them.</p><ul><li>Feature branch related names. These should be short lived and maintained for no more than a few days. Most users will not find these useful.</li><li>Build id related names. These are opaque to a user and harder to dig up history on when debugging.</li><li>Build date related names. These are also opaque to a user and difficult to dig up history on when debugging. You at least get a sense of when these changes went in but are hard to tie to a commit in mainline.</li></ul><h3 id=test>Test
<a class=anchor href=#test>#</a></h3><p>We will not be writing deeply about testing methodologies or specifics around kinds of tests and the philosophies here.</p><p>In the context of a CI pipeline:</p><h4 id=tests-should-be-hermetic>Tests should be hermetic.
<a class=anchor href=#tests-should-be-hermetic>#</a></h4><p>Ideally, multiple CI runs should be able to run at the same time without affecting each other.</p><h4 id=tests-should-be-idempotent>Tests should be idempotent.
<a class=anchor href=#tests-should-be-idempotent>#</a></h4><p>Tests in CI should be able to run several times over without producing inconsistent effects.</p><h4 id=tests-should-be-reproducible-in-a-developers-computer>Tests should be reproducible in a developer&rsquo;s computer.
<a class=anchor href=#tests-should-be-reproducible-in-a-developers-computer>#</a></h4><p>So developers can debug them more easily.</p><h4 id=tests-should-run-fast>Tests should run fast.
<a class=anchor href=#tests-should-run-fast>#</a></h4><p>&ldquo;Fast&rdquo; is poorly defined here. Generally speaking, you want tests to be fast so merging code changes is fast. A developer shouldn&rsquo;t think they can start on a new piece of work in the hour or two to push a change through CI and context switch.</p><h4 id=tests-should-fail-fast>Tests should fail fast.
<a class=anchor href=#tests-should-fail-fast>#</a></h4><p>Similar to the previous point, &ldquo;fast&rdquo; is relative but in CI you will want to give the waiting devloper signal on whether their work can be merged or requires changes as quick as possible.</p><h3 id=deployment>Deployment
<a class=anchor href=#deployment>#</a></h3><p>Deployment will differ project to project and should take into account the requirements of the system being deployed to.</p><h4 id=deployment-should-be-repeatable>Deployment should be repeatable.
<a class=anchor href=#deployment-should-be-repeatable>#</a></h4><p>The same code and configuration should be deployable again and again.</p><h4 id=deployment-process-for-software-should-be-the-same-regardless-of-environment>Deployment process for software should be the same regardless of environment.
<a class=anchor href=#deployment-process-for-software-should-be-the-same-regardless-of-environment>#</a></h4><p>Using the same process and tooling means lower cognitive overhead in deployment and your non production environments should reflect production more closely.</p><h4 id=deployment-tools-should-be-maintained-separate-from-the-application-being-deployed>Deployment tools should be maintained separate from the application being deployed.
<a class=anchor href=#deployment-tools-should-be-maintained-separate-from-the-application-being-deployed>#</a></h4><p>We&rsquo;ve seen this happen where we need to fix some deployed code but also had a problem with the code that performs the deployment and all of it is a hairy mess of debugging.</p><h3 id=release>Release
<a class=anchor href=#release>#</a></h3><p>There are a few different ways of implementing release. No matter what, release is the step when you allow customers to have access to that particular version of your code.</p><p>If you&rsquo;re releasing a CLI, it may mean that you&rsquo;re releasing your binary to a Homebrew tap or just a zip file to GitHub releases.</p><p>If you have a service, you could have a loadbalancer manage traffic between different versions of your services. Or you could use something like Launch Darkly to leverage feature flags to do something similar for different user cohorts.</p><h2 id=continuous-integration--delivery--deployment>Continuous (Integration | Delivery | Deployment)
<a class=anchor href=#continuous-integration--delivery--deployment>#</a></h2><p>We throw around terms like CI or CD with the assumption that we know what the differences are between these practices.</p><p>For clarity, we&rsquo;ll refer to them as follows:</p><h3 id=continuous-integration>Continuous Integration
<a class=anchor href=#continuous-integration>#</a></h3><p><code>Continuous Integration</code> is when you validate on every push to mainline. This helps folks find failures in the code before it reaches mainline. Ideally, automated build and test steps validate changes and stop any new changes to mainline. Mainline must always be in a good state to deploy from.</p><p>This may manifest as a process where developers merge changes into mainline as often as possible. Small incremental changes to code and small discrete tests make changes easier to understand and facilitate frequent merges in CI. This practice helps mitigate risks from long lived branches and helps validate small changes in quick succession.</p><p>That being said, in practice we see longer lived branches for features or versions. These branches need to be kept up to date with mainline with frequent merges or rebases from mainline.</p><p>The point of either of those practices is to minimize drift between your working branch and mainline so validation in CI or manually is easier.</p><h3 id=continuous-delivery>Continuous Delivery
<a class=anchor href=#continuous-delivery>#</a></h3><p><code>Continuous Delivery</code> can be described as an extension to <code>Continuous Integration</code>. In addition to automated build and test steps running on every proposed change to mainline, the delivery of the code is also automated.</p><p>You want the software built to be deployable at any given point in time.</p><p>Delivery may mean different things depending on your workflow. It may mean that you have built your artifacts and validated them and delivered them to a centralized repository. For example, Docker containers might go to Docker Hub or Amazon Elastic Container Registry (ECR). Might mean that the code has been deployed to a staging environment. All of these could be &ldquo;delivered&rdquo; depending on the project&rsquo;s workflow.</p><h3 id=continuous-deployment>Continuous Deployment
<a class=anchor href=#continuous-deployment>#</a></h3><p><code>Continuous Deployment</code> can be described as a further extension of <code>Continuous Delivery</code>. In addition to automated build, test, and delivery, production deployment is also automated.</p><p>This is an advanced state that requires excellent, trustworthy, automated tests and monitoring. The complexity of continuous deployment system is correlated with the complexity of the delivery pipeline. It&rsquo;s much easier to have continous deployment of a single container image than a full-featured web application.</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/805th-Shoc/805th-Shoc.github.io/commit/68107e13639aa3571776ec70bc74c1fcf0a5a6f6 title='Last modified by Rev. Richard E. Baker | February 8, 2023' target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>February 8, 2023</span></a></div><div><a class="flex align-center" href=https://github.com/805th-Shoc/805th-Shoc.github.io/edit/main/exampleSite/content/docs/develop/intro-to-ci-cd.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#intro-to-cicd>Intro to CI/CD</a><ul><li><a href=#delivery-pipeline-basics>Delivery Pipeline Basics</a><ul><li><a href=#build>Build</a></li><li><a href=#test>Test</a></li><li><a href=#deployment>Deployment</a></li><li><a href=#release>Release</a></li></ul></li><li><a href=#continuous-integration--delivery--deployment>Continuous (Integration | Delivery | Deployment)</a><ul><li><a href=#continuous-integration>Continuous Integration</a></li><li><a href=#continuous-delivery>Continuous Delivery</a></li><li><a href=#continuous-deployment>Continuous Deployment</a></li></ul></li></ul></li></ul></nav></div></aside></main></body></html>