<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Git Repos # This page provides guidance on how to set up and manage your Git repos. For Rhinos, most of these will be kept in GitHub, so much of this advice will be geared specifically to managing GitHub repositories.
Setting Up Repositories # We try to manage our Git repositories with Terraform as much as possible. However, we haven&rsquo;t had great luck creating repos with Terraform, so what we do is create the repo manually in GitHub, then import it into Terraform."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="Git Repos # This page provides guidance on how to set up and manage your Git repos. For Rhinos, most of these will be kept in GitHub, so much of this advice will be geared specifically to managing GitHub repositories.
Setting Up Repositories # We try to manage our Git repositories with Terraform as much as possible. However, we haven&rsquo;t had great luck creating repos with Terraform, so what we do is create the repo manually in GitHub, then import it into Terraform."><meta property="og:type" content="article"><meta property="og:url" content="https://805th-Shoc.github.io/docs/develop/source-control-repos/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2023-02-08T15:06:45-08:00"><title>Source Control Repos | Engineering-Playbook</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.4b35fed0bea034bbc19c89c71e14b73fb9c68cfcc586b9382adfb9b7b103ba06.css integrity="sha256-SzX+0L6gNLvBnInHHhS3P7nGjPzFhrk4Kt+5t7EDugY=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.e9f1ed0eb0c8fbc78d9719b804150126e1b58fac01b532b80a8b0ac4f529e42b.js integrity="sha256-6fHtDrDI+8eNlxm4BBUBJuG1j6wBtTK4CosKxPUp5Cs=" crossorigin=anonymous></script>
<script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js integrity="sha256-b2+Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC+NdcPIvZhzk=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>Engineering-Playbook</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/>Welcome</a></li><li><a href=/docs/documentation/introduction-to-documentation/>Documentation</a><ul><li><a href=/docs/documentation/introduction-to-documentation/>Introduction to Documentation</a></li><li><a href=/docs/documentation/adr/>Architectural Decision Records</a></li><li><a href=/docs/documentation/external-resources/>External Resources</a></li></ul></li><li><a href=/docs/compliance/information-security-and-federal-compliance/>Security and Compliance</a><ul><li><a href=/docs/compliance/authorization-to-operate/>Authorization to Operate</a></li><li><a href=/docs/compliance/risk-management-framework/>Risk Management Framework</a></li></ul></li><li><a href=/docs/project_management/phases-of-an-agile-project/>Project Management</a><ul><li><a href=/docs/project_management/phases-of-an-agile-project/>Phases of an Agile Project</a><ul><li><a href=/docs/project_management/agile-project-discovery-phase/>Discovery Phase</a></li><li><a href=/docs/project_management/agile-project-prototyping-phase/>Prototyping Phase</a></li><li><a href=/docs/project_management/agile-project-beta-phase/>Beta Phase</a></li><li><a href=/docs/project_management/agile-project-go-live/>Go Live</a></li><li><a href=/docs/project_management/agile-project-hand-off/>Hand Off</a></li></ul></li><li><a href=/docs/project_management/the-steel-cable/>The Steel Cable</a></li><li><a href=/docs/project_management/definition-of-done/>Definition of Done</a></li><li><a href=/docs/project_management/accessibility-standards/>Accessibility Standards</a></li></ul></li><li><a href=/docs/develop/tools-and-practice/>Devloping</a><ul><li><a href=/docs/develop/tools-and-practice/>Tools and Practice</a></li><li><a href=/docs/develop/bugs/>Defects/Bugs</a></li><li><a href=/docs/develop/intro-to-ci-cd/>CI/CD</a><ul><li><a href=/docs/develop/intro-to-ci-cd/>Intro to CI/CD</a></li><li><a href=/docs/develop/standard-delivery-pipeline/>Standard Delivery Pipeline</a></li></ul></li><li><a href=/docs/develop/code-reviews/>Code Reviews</a><ul><li><a href=/docs/develop/great-code-brings-happiness/>Great Code Brings Happiness</a></li><li><a href=/docs/develop/best-practices-for-submitting-pull-requests/>Best Practices for Submitting a Pull Request</a></li></ul></li><li><a href=/>Command Line Tools</a><ul><li><a href=/docs/develop/direnv/>direnv</a></li><li><a href=/docs/develop/docker/>Docker</a></li></ul></li><li><a href=/docs/develop/configuration/>Configuration</a></li><li><a href=/docs/develop/development-cycle/>Development Cycle</a></li><li><a href=/docs/develop/editors-ides-debuggers/>Editors, IDEs and Debuggers</a></li><li><a href=/docs/develop/growth/>Growth</a></li><li><a href=/docs/develop/health-checks/>Health Checks</a></li><li><a href=/docs/develop/programming-languages/>Programming Languages</a><ul><li><a href=/docs/develop/programming-languages-shell/>Shell Programming</a></li><li><a href=/docs/develop/programming-languages-golang/>Golang</a></li><li><a href=/docs/develop/programming-languages-python/>Python</a></li></ul></li><li><a href=/>Learning Resources</a></li><li><a href=/>Open Source</a></li><li><a href=/>Pair Programming</a></li><li><a href=/>Technical Design</a></li><li><a href=/docs/develop/source-control/>Source Control</a></li><li><a href=/>Leadership</a></li></ul></li><li><a href=/docs/infrastructure/>Infrastructure</a><ul><li><a href=/>IaC</a></li></ul></li></ul><br><ul><li><a href=/posts/>Blog</a></li><li><a href=https://github.com/805th-Shoc/805th-Shoc.github.io target=_blank rel=noopener>Github</a></li><li><a href=https://themes.gohugo.io/hugo-book/ target=_blank rel=noopener>Hugo Themes</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Source Control Repos</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><ul><li><a href=#git-repos>Git Repos</a></li><li><a href=#setting-up-repositories>Setting Up Repositories</a></li><li><a href=#repo-maintenance-and-hygiene>Repo Maintenance and Hygiene</a></li><li><a href=#github-repo-settings>GitHub Repo Settings</a></li><li><a href=#splitting-out-code-to-a-new-repository>Splitting Out Code to a New Repository</a></li></ul></li></ul></nav></aside></header><article class=markdown><h2 id=git-repos>Git Repos
<a class=anchor href=#git-repos>#</a></h2><p>This page provides guidance on how to set up and manage your Git repos. For Rhinos, most of these will be kept in
<a href=https://github.com>GitHub</a>, so much of this advice will be geared specifically to managing GitHub repositories.</p><h2 id=setting-up-repositories>Setting Up Repositories
<a class=anchor href=#setting-up-repositories>#</a></h2><p>We try to manage our Git repositories with Terraform as much as possible. However, we haven&rsquo;t had great luck creating repos with Terraform, so what we do is create the repo manually in GitHub, then import it into Terraform. For an example of how we&rsquo;ve done that, and what Terraform code for GitHub repositories looks like, you can look in the legendary-waddle repo.</p><h2 id=repo-maintenance-and-hygiene>Repo Maintenance and Hygiene
<a class=anchor href=#repo-maintenance-and-hygiene>#</a></h2><ul><li>Avoid including files in source control that are specific to your development machine or process. For example, your editor or OS might generate files that are not pertinent to your project. Since those types of files will need to be ignored from all the repos you work on, it&rsquo;s more convenient to set them once in a global <code>.gitignore</code> file (typically named <code>~/.gitignore_global</code>), as opposed to in each repo&rsquo;s <code>.gitignore</code>. Once you create your file and add rules to it, you can tell Git to use it:</li></ul><pre tabindex=0><code>git config --global core.excludesfile ~/.gitignore_global
</code></pre><ul><li>Delete local and remote feature branches after merging. This allows us to reuse branch names, and makes it easier for you to differentiate between your branches that are done and those that are still being worked on. To turn this on in GitHub, check the &ldquo;Automatically delete head branches&rdquo; box under the &ldquo;Merge button&rdquo; heading in the Options settings for your repo. If you&rsquo;re maintaining the repo with our
<a href=/>terraform-github-repo</a> module, it will turn this on automatically.</li></ul><h2 id=github-repo-settings>GitHub Repo Settings
<a class=anchor href=#github-repo-settings>#</a></h2><ul><li><a href=https://help.github.com/en/articles/configuring-protected-branches>Protect the default branch</a> by turning on the following settings at a minimum:<ul><li>Require pull request reviews before merging</li><li>Require status checks to pass before merging</li><li>Include administrators</li></ul></li></ul><p>If you&rsquo;re maintaining the repo with our
<a href=TODO>terraform-github-repo</a> module, it will turn this on automatically.</p><h2 id=splitting-out-code-to-a-new-repository>Splitting Out Code to a New Repository
<a class=anchor href=#splitting-out-code-to-a-new-repository>#</a></h2><p>If you need to split out code from one of your repositories into its own separate repo, you can follow these steps to make sure you&rsquo;re preserving the commit history when doing so.</p><p>The <code>filter-branch</code> subcommand to <code>git</code> can be used to accomplish this, but the
<a href=https://git-scm.com/docs/git-filter-branch>documentation</a> strongly discourages its use. Instead, a third-party utility called
<a href=https://github.com/newren/git-filter-repo>git-filter-repo</a> is recommended.</p><p>First, create a new repo using the GitHub UI as you would normally.</p><p>In your terminal, clone a copy of the original repo into a new folder:</p><pre tabindex=0><code>git clone git@github.com:OWNER/REPONAME.git NEWREPO &amp;&amp; cd NEWREPO
</code></pre><p>Filter out commits that change the specified directory:</p><pre tabindex=0><code>git-filter-repo --subdirectory-filter DIRNAME
</code></pre><p>The <code>origin</code> remote will be removed in this process. Add it back with the new repo URL, and push the filtered work tree:</p><pre tabindex=0><code>git remote add origin git@github.com:OWNER/NEWREPO.git
git push --set-upstream origin &lt;main&gt;
</code></pre><p>Note: This repo should be public and properly licensed. SHOC has a 🔒
<a href=/>decision record</a> on what licenses should be applied to which sorts of projects.</p><p>If your project is managing its GitHub repositories with Terraform as we suggest, make sure you add the repo to the Terraform code and import it from GitHub. Speak to your project&rsquo;s infrasec team if you need help with this.</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/805th-Shoc/805th-Shoc.github.io/commit/68107e13639aa3571776ec70bc74c1fcf0a5a6f6 title='Last modified by Rev. Richard E. Baker | February 8, 2023' target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>February 8, 2023</span></a></div><div><a class="flex align-center" href=https://github.com/805th-Shoc/805th-Shoc.github.io///content/docs/develop/source-control-repos.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><ul><li><a href=#git-repos>Git Repos</a></li><li><a href=#setting-up-repositories>Setting Up Repositories</a></li><li><a href=#repo-maintenance-and-hygiene>Repo Maintenance and Hygiene</a></li><li><a href=#github-repo-settings>GitHub Repo Settings</a></li><li><a href=#splitting-out-code-to-a-new-repository>Splitting Out Code to a New Repository</a></li></ul></li></ul></nav></div></aside></main></body></html>