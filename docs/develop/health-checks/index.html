<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Health Checks # Overview # In modern API services, it is not uncommon to build and rely upon Healthcheck endpoint(s). These endpoints are generally orthogonal to the operating business logic of the service, and are intended to be consumed by the Operators of the system (e.g. InfraSec practitioners).
There are many ways that Healthcheck endpoints can be used in a system:
Readiness - Upon startup, has my app warmed up any internal caches that are needed before it can respond to traffic?"><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="Health Checks # Overview # In modern API services, it is not uncommon to build and rely upon Healthcheck endpoint(s). These endpoints are generally orthogonal to the operating business logic of the service, and are intended to be consumed by the Operators of the system (e.g. InfraSec practitioners).
There are many ways that Healthcheck endpoints can be used in a system:
Readiness - Upon startup, has my app warmed up any internal caches that are needed before it can respond to traffic?"><meta property="og:type" content="article"><meta property="og:url" content="https://805th-Shoc.github.io/docs/develop/health-checks/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2023-02-08T15:06:45-08:00"><title>Health Checks | Engineering-Playbook</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.4b35fed0bea034bbc19c89c71e14b73fb9c68cfcc586b9382adfb9b7b103ba06.css integrity="sha256-SzX+0L6gNLvBnInHHhS3P7nGjPzFhrk4Kt+5t7EDugY=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.941313a023209828c887550ad1e6ffb06e03377997c980d428153b11b72ea760.js integrity="sha256-lBMToCMgmCjIh1UK0eb/sG4DN3mXyYDUKBU7Ebcup2A=" crossorigin=anonymous></script>
<script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js integrity="sha256-b2+Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC+NdcPIvZhzk=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>Engineering-Playbook</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/>Welcome</a></li><li><a href=/docs/documentation/introduction-to-documentation/>Documentation</a><ul><li><a href=/docs/documentation/introduction-to-documentation/>Introduction to Documentation</a></li><li><a href=/docs/documentation/adr/>Architectural Decision Records</a></li><li><a href=/docs/documentation/external-resources/>External Resources</a></li></ul></li><li><a href=/docs/compliance/information-security-and-federal-compliance/>Security and Compliance</a><ul><li><a href=/docs/compliance/authorization-to-operate/>Authorization to Operate</a></li><li><a href=/docs/compliance/risk-management-framework/>Risk Management Framework</a></li></ul></li><li><a href=/docs/project_management/phases-of-an-agile-project/>Project Management</a><ul><li><a href=/docs/project_management/phases-of-an-agile-project/>Phases of an Agile Project</a><ul><li><a href=/docs/project_management/agile-project-discovery-phase/>Discovery Phase</a></li><li><a href=/docs/project_management/agile-project-prototyping-phase/>Prototyping Phase</a></li><li><a href=/docs/project_management/agile-project-beta-phase/>Beta Phase</a></li><li><a href=/docs/project_management/agile-project-go-live/>Go Live</a></li><li><a href=/docs/project_management/agile-project-hand-off/>Hand Off</a></li></ul></li><li><a href=/docs/project_management/the-steel-cable/>The Steel Cable</a></li><li><a href=/docs/project_management/definition-of-done/>Definition of Done</a></li><li><a href=/docs/project_management/accessibility-standards/>Accessibility Standards</a></li></ul></li><li><a href=/docs/develop/tools-and-practice/>Devloping</a><ul><li><a href=/docs/develop/tools-and-practice/>Tools and Practice</a></li><li><a href=/docs/develop/bugs/>Defects/Bugs</a></li><li><a href=/docs/develop/intro-to-ci-cd/>CI/CD</a><ul><li><a href=/docs/develop/intro-to-ci-cd/>Intro to CI/CD</a></li><li><a href=/docs/develop/standard-delivery-pipeline/>Standard Delivery Pipeline</a></li></ul></li><li><a href=/docs/develop/code-reviews/>Code Reviews</a><ul><li><a href=/docs/develop/great-code-brings-happiness/>Great Code Brings Happiness</a></li><li><a href=/docs/develop/best-practices-for-submitting-pull-requests/>Best Practices for Submitting a Pull Request</a></li></ul></li><li><a href=/>Command Line Tools</a><ul><li><a href=/docs/develop/direnv/>direnv</a></li><li><a href=/docs/develop/docker/>Docker</a></li></ul></li><li><a href=/docs/develop/configuration/>Configuration</a></li><li><a href=/docs/develop/development-cycle/>Development Cycle</a></li><li><a href=/docs/develop/editors-ides-debuggers/>Editors, IDEs and Debuggers</a></li><li><a href=/docs/develop/growth/>Growth</a></li><li><a href=/docs/develop/health-checks/ class=active>Health Checks</a></li><li><a href=/docs/develop/programming-languages/>Programming Languages</a><ul><li><a href=/docs/develop/programming-languages-shell/>Shell Programming</a></li><li><a href=/docs/develop/programming-languages-golang/>Golang</a></li><li><a href=/docs/develop/programming-languages-python/>Python</a></li></ul></li><li><a href=/>Learning Resources</a></li><li><a href=/>Open Source</a></li><li><a href=/>Pair Programming</a></li><li><a href=/>Technical Design</a></li><li><a href=/docs/develop/source-control/>Source Control</a></li><li><a href=/>Leadership</a></li></ul></li><li><a href=/docs/infrastructure/>Infrastructure</a><ul><li><a href=/>IaC</a></li></ul></li></ul><br><ul><li><a href=/posts/>Blog</a></li><li><a href=https://github.com/805th-Shoc/805th-Shoc.github.io target=_blank rel=noopener>Github</a></li><li><a href=https://themes.gohugo.io/hugo-book/ target=_blank rel=noopener>Hugo Themes</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Health Checks</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#health-checks>Health Checks</a><ul><li><a href=#overview>Overview</a></li><li><a href=#security>Security</a></li><li><a href=#reliability>Reliability</a></li><li><a href=#healthchecks-in-deployment-pipelines>Healthchecks in Deployment Pipelines</a></li><li><a href=#contents>Contents</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=health-checks>Health Checks
<a class=anchor href=#health-checks>#</a></h1><h2 id=overview>Overview
<a class=anchor href=#overview>#</a></h2><p>In modern API services, it is not uncommon to build and rely upon Healthcheck endpoint(s). These endpoints are generally orthogonal to the operating business logic of the service, and are intended to be consumed by the Operators of the system (e.g. InfraSec practitioners).</p><p>There are many ways that Healthcheck endpoints can be used in a system:</p><ul><li>Readiness - Upon startup, has my app warmed up any internal caches that are needed before it can respond to traffic?</li><li>Liveness - Is this app accepting and responding to traffic at all?</li><li>Versioning - Is the verison of code that is deployed what it is expected to be?</li><li>Reachability - Can a client reach the service over the network?</li><li>Catalog - What are the external dependencies to which this app connects?</li><li>Connectivity - Can the app connect to its external dependencies successfully?</li><li>Quality - Does this endpoint do all its work and respond in a timely manner?</li></ul><p>Many apps will try to achieve their subset of the above goals via a single endpoint, but as apps grow in sophistication it is not unheard of to tease those responsibilities out to separate endpoints.</p><h2 id=security>Security
<a class=anchor href=#security>#</a></h2><p>Frequently healthcheck endpoints are agnostic about authentication and authorization, meaning anyone that can reach the service via the network can access these endpoints.</p><p>Having heathcheck endpoints be un-authenticated implies several other considerations:</p><ul><li>Any information available in the healthcheck should not be confidential, nor should the information be able to be (ab)used to jeopardize the smooth running of the service.</li><li>Unsecured healthchecks could open up the system or its checked dependencies to Denial of Service attacks. This may be mitigated by adding some level of caching in the healthchecks.</li><li>One possible technique for lowering risk is to isolate operational endpoints to a separate port with tighter network ACLs.</li></ul><h2 id=reliability>Reliability
<a class=anchor href=#reliability>#</a></h2><p>Particular care should be taken when using healthchecks as part of the reliability story of an app.</p><p>Prof von Neuman is credited with the concept of &ldquo;synthesis of reliable organisms from unreliable components&rdquo;. He showed that the math works out as such: if my app is serially dependent on 3 other services that are each at 97% reliable, my app can be no more than ~91% (0.97 x 0.97 x 0.97) reliable. This means that if an app&rsquo;s healthcheck is setup to fail when any of its dependencies have failed, this has significantly limited the upper bound of the apps reliability.</p><p>Sometimes an app&rsquo;s reliability really is limited by a dependency, e.g. a database connection. If every single endpoint and functionality in an app requires interaction with the app&rsquo;s database, then it is reasonable to call your app fully inoperable when the database connection is not functioning.</p><p>However, if only a subset of the app&rsquo;s functionality is impacted by an unreliabile dependency, it may be better to handle that instability at runtime, rather than declaring the whole app down. Consider the following example: if only one (out of many) of an app&rsquo;s functionalities depend on sending email, the app should maybe not be considered wholly down if the email service is unreachable; it would be better to handle errors from interacting with the email service gracefully, or possibly even using a technique like feature flagging to turn off any attempts to use that functionality until the service is back in service.</p><h2 id=healthchecks-in-deployment-pipelines>Healthchecks in Deployment Pipelines
<a class=anchor href=#healthchecks-in-deployment-pipelines>#</a></h2><p>It is not uncommon to see teams utilize an app&rsquo;s healthcheck endpoint on the critical path of a deployment pipeline, however this should be evaluated for unintended consequences.</p><p>In modern software engineering, automated deployments are a critical feature of a software system, facilitating the ability to safely and incrementally improve the quality of a running app.</p><p>Again, consider the app example from above that uses an email sending service for one feature: should the external service instability be able to jeopardize the ability to roll out new code? Perhaps the new code for deployment is useful for diagnosing the issue or is intended to temporarily turn off the offending sending of emails: blocking roll out makes remediation of the issue harder rather than safer.</p><h2 id=contents>Contents
<a class=anchor href=#contents>#</a></h2><ul><li><a href=http://web.mit.edu/6.454/www/papers/pierce_1952.pdf>von Neuman paper</a></li><li><a href=https://en.wikipedia.org/wiki/Reliability_engineering>Reliability Engineering</a></li></ul></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/805th-Shoc/805th-Shoc.github.io/commit/68107e13639aa3571776ec70bc74c1fcf0a5a6f6 title='Last modified by Rev. Richard E. Baker | February 8, 2023' target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>February 8, 2023</span></a></div><div><a class="flex align-center" href=https://github.com/805th-Shoc/805th-Shoc.github.io///content/docs/develop/health-checks.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#health-checks>Health Checks</a><ul><li><a href=#overview>Overview</a></li><li><a href=#security>Security</a></li><li><a href=#reliability>Reliability</a></li><li><a href=#healthchecks-in-deployment-pipelines>Healthchecks in Deployment Pipelines</a></li><li><a href=#contents>Contents</a></li></ul></li></ul></nav></div></aside></main></body></html>