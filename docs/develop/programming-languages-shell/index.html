<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Shell programming # Overview # Best practices tl;dr:
Think hard before using bash. Something else is often better. For portability, dash provides a minimal POSIX shell feature set. For complicated tasks, a more modern language like Go or Python may be more reliable and easy to maintain. Use shellcheck Don&rsquo;t copy & paste code from Google or StackExchange unless you fully understand it Keep your bash version up to date with your package manager (e."><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content><meta property="og:description" content="Shell programming # Overview # Best practices tl;dr:
Think hard before using bash. Something else is often better. For portability, dash provides a minimal POSIX shell feature set. For complicated tasks, a more modern language like Go or Python may be more reliable and easy to maintain. Use shellcheck Don&rsquo;t copy & paste code from Google or StackExchange unless you fully understand it Keep your bash version up to date with your package manager (e."><meta property="og:type" content="article"><meta property="og:url" content="https://805th-Shoc.github.io/docs/develop/programming-languages-shell/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2023-02-08T15:06:45-08:00"><title>Programming Languages Shell | Engineering-Playbook</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.4b35fed0bea034bbc19c89c71e14b73fb9c68cfcc586b9382adfb9b7b103ba06.css integrity="sha256-SzX+0L6gNLvBnInHHhS3P7nGjPzFhrk4Kt+5t7EDugY=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.941313a023209828c887550ad1e6ffb06e03377997c980d428153b11b72ea760.js integrity="sha256-lBMToCMgmCjIh1UK0eb/sG4DN3mXyYDUKBU7Ebcup2A=" crossorigin=anonymous></script>
<script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js integrity="sha256-b2+Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC+NdcPIvZhzk=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>Engineering-Playbook</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/>Welcome</a></li><li><a href=/docs/documentation/introduction-to-documentation/>Documentation</a><ul><li><a href=/docs/documentation/introduction-to-documentation/>Introduction to Documentation</a></li><li><a href=/docs/documentation/adr/>Architectural Decision Records</a></li><li><a href=/docs/documentation/external-resources/>External Resources</a></li></ul></li><li><a href=/docs/compliance/information-security-and-federal-compliance/>Security and Compliance</a><ul><li><a href=/docs/compliance/authorization-to-operate/>Authorization to Operate</a></li><li><a href=/docs/compliance/risk-management-framework/>Risk Management Framework</a></li></ul></li><li><a href=/docs/project_management/phases-of-an-agile-project/>Project Management</a><ul><li><a href=/docs/project_management/phases-of-an-agile-project/>Phases of an Agile Project</a><ul><li><a href=/docs/project_management/agile-project-discovery-phase/>Discovery Phase</a></li><li><a href=/docs/project_management/agile-project-prototyping-phase/>Prototyping Phase</a></li><li><a href=/docs/project_management/agile-project-beta-phase/>Beta Phase</a></li><li><a href=/docs/project_management/agile-project-go-live/>Go Live</a></li><li><a href=/docs/project_management/agile-project-hand-off/>Hand Off</a></li></ul></li><li><a href=/docs/project_management/the-steel-cable/>The Steel Cable</a></li><li><a href=/docs/project_management/definition-of-done/>Definition of Done</a></li><li><a href=/docs/project_management/accessibility-standards/>Accessibility Standards</a></li></ul></li><li><a href=/docs/develop/tools-and-practice/>Devloping</a><ul><li><a href=/docs/develop/tools-and-practice/>Tools and Practice</a></li><li><a href=/docs/develop/bugs/>Defects/Bugs</a></li><li><a href=/docs/develop/intro-to-ci-cd/>CI/CD</a><ul><li><a href=/docs/develop/intro-to-ci-cd/>Intro to CI/CD</a></li><li><a href=/docs/develop/standard-delivery-pipeline/>Standard Delivery Pipeline</a></li></ul></li><li><a href=/docs/develop/code-reviews/>Code Reviews</a><ul><li><a href=/docs/develop/great-code-brings-happiness/>Great Code Brings Happiness</a></li><li><a href=/docs/develop/best-practices-for-submitting-pull-requests/>Best Practices for Submitting a Pull Request</a></li></ul></li><li><a href=/>Command Line Tools</a><ul><li><a href=/docs/develop/direnv/>direnv</a></li><li><a href=/docs/develop/docker/>Docker</a></li></ul></li><li><a href=/docs/develop/configuration/>Configuration</a></li><li><a href=/docs/develop/development-cycle/>Development Cycle</a></li><li><a href=/docs/develop/editors-ides-debuggers/>Editors, IDEs and Debuggers</a></li><li><a href=/docs/develop/growth/>Growth</a></li><li><a href=/docs/develop/health-checks/>Health Checks</a></li><li><a href=/docs/develop/programming-languages/>Programming Languages</a><ul><li><a href=/docs/develop/programming-languages-shell/ class=active>Shell Programming</a></li><li><a href=/docs/develop/programming-languages-golang/>Golang</a></li><li><a href=/docs/develop/programming-languages-python/>Python</a></li></ul></li><li><a href=/>Learning Resources</a></li><li><a href=/>Open Source</a></li><li><a href=/>Pair Programming</a></li><li><a href=/>Technical Design</a></li><li><a href=/docs/develop/source-control/>Source Control</a></li><li><a href=/>Leadership</a></li></ul></li><li><a href=/docs/infrastructure/>Infrastructure</a><ul><li><a href=/>IaC</a></li></ul></li></ul><br><ul><li><a href=/posts/>Blog</a></li><li><a href=https://github.com/805th-Shoc/805th-Shoc.github.io target=_blank rel=noopener>Github</a></li><li><a href=https://themes.gohugo.io/hugo-book/ target=_blank rel=noopener>Hugo Themes</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Programming Languages Shell</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#shell-programming>Shell programming</a><ul><li><a href=#overview>Overview</a></li><li><a href=#debugging>Debugging</a><ul><li><a href=#tools>Tools</a></li></ul></li><li><a href=#pitfalls>Pitfalls</a></li><li><a href=#path>PATH</a></li><li><a href=#resources>Resources</a><ul><li><a href=#notes>Notes</a></li></ul></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=shell-programming>Shell programming
<a class=anchor href=#shell-programming>#</a></h1><h2 id=overview>Overview
<a class=anchor href=#overview>#</a></h2><p>Best practices tl;dr:</p><ul><li>Think hard before using bash. Something else is
<a href=https://mywiki.wooledge.org/BashWeaknesses>often better</a>.<ul><li>For portability,
<a href=https://gondor.apana.org.au/~herbert/dash/>dash</a> provides a minimal POSIX shell feature set.</li><li>For complicated tasks, a more modern language like Go or Python may be more reliable and easy to maintain.</li></ul></li><li>Use
<a href=https://shellcheck.net>shellcheck</a></li><li>Don&rsquo;t copy & paste code from Google or StackExchange unless you fully understand it</li><li>Keep your bash version up to date with your package manager (e.g. <code>brew install bash</code> and routinely running <code>brew upgrade</code>), or stick to whatever version your team has agreed to standardize on (e.g. <code>brew pin bash</code>). However, be aware that behavior of bash code can vary slightly between different versions of the interpreter.</li><li>Consolidate your bash profiles into a single <code>~/.bashrc</code> file to streamline machine instructions affecting your <code>PATH</code> environment variables.</li></ul><h2 id=debugging>Debugging
<a class=anchor href=#debugging>#</a></h2><p>Bash will emit debugging output after <code>set -x</code> is executed. <code>set +x</code> to disable debugging output. <code>bash -x ./brokenscript</code> has the same effect without requiring edits to the file. It is also possible to configure the format of the output:</p><pre tabindex=0><code>export PS4=&#39;+$BASH_SOURCE:$LINENO:$FUNCNAME: &#39;
</code></pre><p>For extra verbose debugging, it may be useful to combine this option with <code>set -v</code>: this will also display the shell lines as they are read (i.e. before substitutions are resolved, etc).</p><h3 id=tools>Tools
<a class=anchor href=#tools>#</a></h3><ul><li><a href=https://shellcheck.net>shellcheck</a> is an excellent code linter for bash that catches many common anti-patterns.
<a href=/>Integrations</a> with several popular editors are available. If you only take one thing from this document, make it &ldquo;use <code>shellcheck</code>&rdquo;.</li><li><a href=/>bashdb</a> is an interactive bash debugger inspired by gdb.</li></ul><h2 id=pitfalls>Pitfalls
<a class=anchor href=#pitfalls>#</a></h2><p>Shell programming is deceptively perilous (see
<a href=https://mywiki.wooledge.org/BashPitfalls>Bash Pitfalls</a> on Greg&rsquo;s Wiki and
<a href=https://wiki.bash-hackers.org/scripting/newbie_traps>Beginner Mistakes</a> on Bash-Hackers Wiki). Sites like tldp.org and StackOverflow have high pagerank for shell programming questions, but code blocks posted on these sites will not uncommonly have smells or dangerous errors. Check the
<a href=https://playbook.truss.dev/docs/developing/languages/BASH#Resources>Resources</a> section of this document for some more trustworthy sources.</p><ul><li>POSIX is very permissive about what can go in a file name. In fact, anything except a null byte could be in a filename. Problematic characters include (but are by no means limited to) tabs, newlines, non-breaking spaces,
<a href=https://mywiki.wooledge.org/glob>glob</a> characters, and leading dashes. Many beginner mistakes are a result of failure to fully grok the implications of this; e.g.
<a href=https://mywiki.wooledge.org/WordSplitting>word splitting</a> on whitespace, or globs getting expanded in surprising ways. Aggressively
<a href=https://mywiki.wooledge.org/Quotes>quoting</a> substitutions without a specific reason not to is good practice.</li><li>bash is ubiquitous, but bash != bash. Not infrequently, a version of bash will change its handling of a particular case, only to revert to the old behavior in the next version. MacOS ships bash 3.2.57, but as of this writing bash 5.0 is in homebrew. Other versions may be on whatever host your script will run on, but there is no portable way to force which <code>bash</code> version you will get. On many systems, <code>/bin/sh</code> resolves to <code>bash</code> in POSIX compatibility mode, but you can&rsquo;t be guaranteed of that: prefer being explicit and using <code>#!/usr/bin/env</code> bash for the shebang.</li><li>Be aware of the unpredictable behavior of <code>set -e</code> / <code>set -o errexit</code>. This is useful when developing a script, but
<a href=http://www.fvue.nl/wiki/Bash:_Error_handling>may not behave as you expect</a>. The behavior is
<a href=https://www.in-ulm.de/~mascheck/various/set-e/>unpredictable</a> depending on which shell version your script ultimately runs on; based on this history, consider that it may even change further in future versions of <code>bash</code>.</li><li>Avoid using <code>cd</code> in the main thread when possible, and always include error handling in case the command fails. Losing track of this state can lead to disastrous consequences. Try to use absolute paths, or a subshell like <code>( cd somedir || exit ; somecommand )</code>.</li><li><a href=https://mywiki.wooledge.org/DontReadLinesWithFor>Don&rsquo;t</a> iterate through lines in a stream with <code>for</code>.</li><li>Prefer <code>[[</code> to <code>[</code>: <code>[[</code> is a bash extension that is a strict upgrade over <code>[</code>.</li></ul><h2 id=path>PATH
<a class=anchor href=#path>#</a></h2><ul><li><p><code>PATH</code> is a shortcut to a certain location on your machine, which you can view by typing echo $PATH in the terminal. To oversimplify, a <code>PATH</code> is an environment variable which consists of a list of directories. Adding a <code>PATH</code> to your <code>bash</code> profile will give your machine direct instructions on where to look for a certain program.</p></li><li><p>One of several files can affect how your machine searches for a given <code>PATH</code>, listed in the order a Mac searches for them:</p><ul><li><code>~/.bashrc</code> (read on every new shell, so looked at far more often)</li><li><code>~/.bash_profile</code> (read only on login)</li><li><code>~/.profile</code></li></ul></li><li><p>If you have multiple files affecting your <code>PATH</code>, consider consolidating them into one <code>/.bashrc</code> and deleting the others. Next, organize each <code>PATH</code> directory in your <code>~/.bashrc</code> from most-used to least-used to maximize efficiency.</p></li></ul><h2 id=resources>Resources
<a class=anchor href=#resources>#</a></h2><ul><li>The bash man page: <code>man bash</code></li><li><a href=http://gnu.org/s/bash/manual>GNU Bash Manual</a></li><li><a href=http://mywiki.wooledge.org/BashGuide>Bash Guide</a></li><li><a href=http://mywiki.wooledge.org/BashFAQ>Bash FAQ</a></li><li><a href=https://mywiki.wooledge.org/BashPitfalls>Bash Pitfalls</a></li><li><a href=http://wiki.bash-hackers.org/>Bash-Hackers Wiki</a></li><li><a href=https://truss.works/blog/2016/2/26/engineer-how-to-access-and-edit-your-path-system-variable>Path Variables</a></li><li><a href=https://www.gnu.org/software/bash/manual/bash.html#Introduction-and-Notation>CLI Navigation Shortcuts</a></li></ul><h3 id=notes>Notes
<a class=anchor href=#notes>#</a></h3><p>The Bash CLI navigation shortcuts resource linked above refers to a keyboard shortcut for moving the cursor from word to word: <code>meta key + f or b</code> (under section <code>8.2.2 Readline Movement Commands</code>). This shortcut does not work out of the box on a Mac. In the macOS Terminal app and iTerm2, the default keyboard shortcut for moving from word to word is <code>option + left or right arrow</code>. If you want to use <code>option + f or b</code>, there is a checkbox in Terminal app to <code>Use Option as Meta key</code> under <code>Preferences -> Profiles -> Keyboard</code>. In iTerm2, you can change key mappings under <code>Preferences -> Profiles -> Keys</code>.</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/805th-Shoc/805th-Shoc.github.io/commit/68107e13639aa3571776ec70bc74c1fcf0a5a6f6 title='Last modified by Rev. Richard E. Baker | February 8, 2023' target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>February 8, 2023</span></a></div><div><a class="flex align-center" href=https://github.com/805th-Shoc/805th-Shoc.github.io/edit/main/exampleSite/content/docs/develop/programming-languages-shell.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#shell-programming>Shell programming</a><ul><li><a href=#overview>Overview</a></li><li><a href=#debugging>Debugging</a><ul><li><a href=#tools>Tools</a></li></ul></li><li><a href=#pitfalls>Pitfalls</a></li><li><a href=#path>PATH</a></li><li><a href=#resources>Resources</a><ul><li><a href=#notes>Notes</a></li></ul></li></ul></li></ul></nav></div></aside></main></body></html>