<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="direnv # Overview # direnv is an MIT-licensed command-line tool that addresses the hassle of setting per-project environment variables.
Installation # Via homebrew:
brew install direnv Getting started # Create an .envrc file in a directory with some environment variables your project needs:
$ cat <<ENVRC > .envrc export DB_HOST=localhost export DB_PORT=5432 export DB_USER=postgres export DB_PASSWORD=mysecretpassword export DB_NAME=dev_db CLIENT_AUTH_SECRET_KEY=$(<client_auth_secret.key) ENVRC $ On first run, you should get a message indicating that you will have to explicitly authorize direnv to load the file:"><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content="direnv"><meta property="og:description" content="direnv # Overview # direnv is an MIT-licensed command-line tool that addresses the hassle of setting per-project environment variables.
Installation # Via homebrew:
brew install direnv Getting started # Create an .envrc file in a directory with some environment variables your project needs:
$ cat <<ENVRC > .envrc export DB_HOST=localhost export DB_PORT=5432 export DB_USER=postgres export DB_PASSWORD=mysecretpassword export DB_NAME=dev_db CLIENT_AUTH_SECRET_KEY=$(<client_auth_secret.key) ENVRC $ On first run, you should get a message indicating that you will have to explicitly authorize direnv to load the file:"><meta property="og:type" content="article"><meta property="og:url" content="https://805th-Shoc.github.io/docs/develop/direnv/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2023-02-08T15:06:45-08:00"><title>direnv | Engineering-Playbook</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.4b35fed0bea034bbc19c89c71e14b73fb9c68cfcc586b9382adfb9b7b103ba06.css integrity="sha256-SzX+0L6gNLvBnInHHhS3P7nGjPzFhrk4Kt+5t7EDugY=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.e9f1ed0eb0c8fbc78d9719b804150126e1b58fac01b532b80a8b0ac4f529e42b.js integrity="sha256-6fHtDrDI+8eNlxm4BBUBJuG1j6wBtTK4CosKxPUp5Cs=" crossorigin=anonymous></script>
<script defer src=/sw.min.6f6f90fcb8eb1c49ec389838e6b801d0de19430b8e516902f8d75c3c8bd98739.js integrity="sha256-b2+Q/LjrHEnsOJg45rgB0N4ZQwuOUWkC+NdcPIvZhzk=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><span>Engineering-Playbook</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/>Welcome</a></li><li><a href=/docs/documentation/introduction-to-documentation/>Documentation</a><ul><li><a href=/docs/documentation/introduction-to-documentation/>Introduction to Documentation</a></li><li><a href=/docs/documentation/adr/>Architectural Decision Records</a></li><li><a href=/docs/documentation/external-resources/>External Resources</a></li></ul></li><li><a href=/docs/compliance/information-security-and-federal-compliance/>Security and Compliance</a><ul><li><a href=/docs/compliance/authorization-to-operate/>Authorization to Operate</a></li><li><a href=/docs/compliance/risk-management-framework/>Risk Management Framework</a></li></ul></li><li><a href=/docs/project_management/phases-of-an-agile-project/>Project Management</a><ul><li><a href=/docs/project_management/phases-of-an-agile-project/>Phases of an Agile Project</a><ul><li><a href=/docs/project_management/agile-project-discovery-phase/>Discovery Phase</a></li><li><a href=/docs/project_management/agile-project-prototyping-phase/>Prototyping Phase</a></li><li><a href=/docs/project_management/agile-project-beta-phase/>Beta Phase</a></li><li><a href=/docs/project_management/agile-project-go-live/>Go Live</a></li><li><a href=/docs/project_management/agile-project-hand-off/>Hand Off</a></li></ul></li><li><a href=/docs/project_management/the-steel-cable/>The Steel Cable</a></li><li><a href=/docs/project_management/definition-of-done/>Definition of Done</a></li><li><a href=/docs/project_management/accessibility-standards/>Accessibility Standards</a></li></ul></li><li><a href=/docs/develop/tools-and-practice/>Devloping</a><ul><li><a href=/docs/develop/tools-and-practice/>Tools and Practice</a></li><li><a href=/docs/develop/bugs/>Defects/Bugs</a></li><li><a href=/docs/develop/intro-to-ci-cd/>CI/CD</a><ul><li><a href=/docs/develop/intro-to-ci-cd/>Intro to CI/CD</a></li><li><a href=/docs/develop/standard-delivery-pipeline/>Standard Delivery Pipeline</a></li></ul></li><li><a href=/docs/develop/code-reviews/>Code Reviews</a><ul><li><a href=/docs/develop/great-code-brings-happiness/>Great Code Brings Happiness</a></li><li><a href=/docs/develop/best-practices-for-submitting-pull-requests/>Best Practices for Submitting a Pull Request</a></li></ul></li><li><a href=/>Command Line Tools</a><ul><li><a href=/docs/develop/direnv/ class=active>direnv</a></li><li><a href=/docs/develop/docker/>Docker</a></li></ul></li><li><a href=/docs/develop/configuration/>Configuration</a></li><li><a href=/docs/develop/development-cycle/>Development Cycle</a></li><li><a href=/docs/develop/editors-ides-debuggers/>Editors, IDEs and Debuggers</a></li><li><a href=/docs/develop/growth/>Growth</a></li><li><a href=/docs/develop/health-checks/>Health Checks</a></li><li><a href=/docs/develop/programming-languages/>Programming Languages</a><ul><li><a href=/docs/develop/programming-languages-shell/>Shell Programming</a></li><li><a href=/docs/develop/programming-languages-golang/>Golang</a></li><li><a href=/docs/develop/programming-languages-python/>Python</a></li></ul></li><li><a href=/>Learning Resources</a></li><li><a href=/>Open Source</a></li><li><a href=/>Pair Programming</a></li><li><a href=/>Technical Design</a></li><li><a href=/docs/develop/source-control/>Source Control</a></li><li><a href=/>Leadership</a></li></ul></li><li><a href=/docs/infrastructure/>Infrastructure</a><ul><li><a href=/>IaC</a></li></ul></li></ul><br><ul><li><a href=/posts/>Blog</a></li><li><a href=https://github.com/805th-Shoc/805th-Shoc.github.io target=_blank rel=noopener>Github</a></li><li><a href=https://themes.gohugo.io/hugo-book/ target=_blank rel=noopener>Hugo Themes</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>direnv</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#direnv>direnv</a><ul><li><a href=#overview>Overview</a><ul><li><a href=#installation>Installation</a></li><li><a href=#getting-started>Getting started</a></li><li><a href=#language-specific-settings>Language-specific settings</a></li><li><a href=#storing-secrets-with-direnv>Storing secrets with direnv</a></li></ul></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=direnv>direnv
<a class=anchor href=#direnv>#</a></h1><h2 id=overview>Overview
<a class=anchor href=#overview>#</a></h2><p>direnv is an MIT-licensed command-line tool that addresses the hassle of setting per-project environment variables.</p><h3 id=installation>Installation
<a class=anchor href=#installation>#</a></h3><p>Via homebrew:</p><pre tabindex=0><code>brew install direnv
</code></pre><h3 id=getting-started>Getting started
<a class=anchor href=#getting-started>#</a></h3><p>Create an .envrc file in a directory with some environment variables your project needs:</p><pre tabindex=0><code>$ cat &lt;&lt;ENVRC &gt; .envrc
export DB_HOST=localhost
export DB_PORT=5432
export DB_USER=postgres
export DB_PASSWORD=mysecretpassword
export DB_NAME=dev_db
CLIENT_AUTH_SECRET_KEY=$(&lt;client_auth_secret.key)
ENVRC
$
</code></pre><p>On first run, you should get a message indicating that you will have to explicitly authorize direnv to load the file:</p><pre tabindex=0><code>$ cd ./projectdir
direnv: error .envrc is blocked. Run `direnv allow` to approve its content.
$ direnv allow
direnv: loading .envrc
direnv: export +DB_HOST +DB_NAME +DB_PASSWORD +DB_PORT +DB_USER -PS2
$
</code></pre><p>Your local environment variables should be updated now. Any time the <code>.envrc</code> file is changed, you will need to re-approve the file, but it will load automatically otherwise.</p><h3 id=language-specific-settings>Language-specific settings
<a class=anchor href=#language-specific-settings>#</a></h3><h4 id=direnv-and-golang>direnv and golang
<a class=anchor href=#direnv-and-golang>#</a></h4><p>From the direnv wiki:</p><p>If you&rsquo;re using the gb build tool for Go projects, you may find this layout useful for helping many GOPATH-dependent ecosystem tools work seamlessly in your projects:</p><pre tabindex=0><code># Usage: layout golang
#
# Sets up environment for a Go project using the alternative gb build tool. Also
# works with the official dep package.In addition to project executables on
# PATH, this includes an exclusive, project- local GOPATH which enables many
# tools like gocode and oracle to &#34;just work&#34;.
#
# http://getgb.io/
# https://golang.github.io/dep/
#

layout_golang() {
  export GOPATH=&#34;$PWD/vendor:$PWD&#34;
  PATH_add &#34;$PWD/vendor/bin&#34;
  PATH_add bin
}
</code></pre><p>Add this to your <code>~/.direnvrc</code> and then use <code>layout golang</code> in your project <code>.envrc</code>&rsquo;s. With this loaded, the support for many tools like <code>gocode</code>, <code>oracle</code>, <code>godoc</code>, etc. in editor plugins like vim-go and GoSublime will usually &ldquo;just work&rdquo;. This layout may also be completely applicable if you are using the Go 1.5 &ldquo;vendor experiment&rdquo; with the official <code>go</code> tool on your project.</p><p>See this pull request for some background discussion.</p><h4 id=direnv-and-docker-machine>direnv and Docker Machine
<a class=anchor href=#direnv-and-docker-machine>#</a></h4><p>From the direnv wiki:</p><p>When using Docker Machine on OS X, there&rsquo;s an incantation that needs to be run in every shell where you want to run Docker. Direnv can help mitigate that annoyance:</p><p>Add to <code>~/.direnvrc</code></p><pre tabindex=0><code>use_docker-machine(){
  local env=${1:-default}
  echo Docker machine: $env
  local machine_cmd=$(docker-machine env --shell bash $env)

  eval $(docker-machine env --shell bash $env)
}
</code></pre><p>Any project that&rsquo;s using docker, add to <code>.envrc</code>:</p><pre tabindex=0><code>use docker-machine
</code></pre><p>One nice feature to this is that you can have different Docker machine VMs per project, if needed by saying <code>use docker-machine special</code>, for instance.</p><p>Note that when using this pattern, when docker-machine warns you to <code>eval (docker-machine env)</code>, you&rsquo;ll want instead to <code>direnv reload</code>.</p><h4 id=direnv-and-python>direnv and python
<a class=anchor href=#direnv-and-python>#</a></h4><p>If using <code>pipenv</code>, add <code>layout_pipenv</code> to the <code>.envrc</code> and the virtualenv will be loaded automatically when you enter the project directory.</p><h3 id=storing-secrets-with-direnv>Storing secrets with direnv
<a class=anchor href=#storing-secrets-with-direnv>#</a></h3><p>Sometimes, we want to put the <code>.envrc</code> in source control but also use direnv to store secrets that should not be source controlled. With this bit of code, we can separate local secrets into <code>.envrc.local</code>:</p><pre tabindex=0><code>$ cat &lt;&lt; EOF &gt;&gt; .envrc
if [[ -s .envrc.local ]] ; then
  source_env .envrc.local
fi
EOF
$ echo &#34;.envrc.local&#34; &gt;&gt; .gitignore
</code></pre><p>Commands in <code>.envrc.local</code> will be loaded by direnv, but ignored by git.</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/805th-Shoc/805th-Shoc.github.io/commit/68107e13639aa3571776ec70bc74c1fcf0a5a6f6 title='Last modified by Rev. Richard E. Baker | February 8, 2023' target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>February 8, 2023</span></a></div><div><a class="flex align-center" href=https://github.com/805th-Shoc/805th-Shoc.github.io///content/docs/develop/direnv.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#direnv>direnv</a><ul><li><a href=#overview>Overview</a><ul><li><a href=#installation>Installation</a></li><li><a href=#getting-started>Getting started</a></li><li><a href=#language-specific-settings>Language-specific settings</a></li><li><a href=#storing-secrets-with-direnv>Storing secrets with direnv</a></li></ul></li></ul></li></ul></nav></div></aside></main></body></html>